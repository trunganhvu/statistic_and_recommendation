{% extends "./baseprofile.html" %}
{% block content-profile %}
<div class="card">
    <form class="p-3" method="post">
        {% csrf_token %}
        <div class="form-group row">
            <label for="username" class="col-sm-3 col-form-label">Tên đăng nhập:</label>
            <div class="col-sm-9">
                <input type="text" class="form-control" id="username" value="{{username}}" readonly>
            </div>
        </div>
        <div class="form-group row">
            <label for="lastName" class="col-sm-3 col-form-label">Họ:</label>
            <div class="col-sm-3">
                <input type="text" class="form-control" id="lastName" name="lastName"
                {% if lastName == None or lastName == '' %}
                    placeholder="Chưa có thông tin"
                {% else %}
                    value="{{lastName}}"
                {% endif %}
                >
            </div>
            <label for="class" class="col-sm-2 col-form-label">Tên:</label>
            <div class="col-sm-4">
                <input type="text" class="form-control" id="firstName" name="firstName"
                    {% if firstName == None or firstName == '' %}
                        placeholder="Chưa có thông tin"
                    {% else %}
                        value="{{firstName}}" 
                    {% endif %}
                >
            </div>
        </div>
        <div class="form-group row">
            <label for="studentcode" class="col-sm-3 col-form-label">Mã sinh viên:</label>
            <div class="col-sm-9">
                <input type="text" class="form-control" id="studentcode" name="MSSV" 
                    {% if MSSV == None or MSSV == '' %}
                        placeholder="Chưa có thông tin"
                    {% else %}
                        value="{{MSSV}}" readonly
                    {% endif %}
                >
            </div>
        </div>
        <div class="form-group row">
            <label for="dateofbirth" class="col-sm-3 col-form-label">Ngày sinh:</label>
            <div class="col-sm-9">
                <input type="date" class="form-control" id="dateofbirth" name="birthday"
                    {% if birthday == None or birthday == '' %}
                        value="2020-01-01"
                    {% else %}
                        value="{{birthday}}"
                    {% endif %}
                >
            </div>
        </div>
        <div class="form-group row">
            <label for="email" class="col-sm-3 col-form-label">Email:</label>
            <div class="col-sm-9">
                <input type="text" class="form-control" id="email" name="email"
                    {% if email == None or email == '' %}
                        placeholder="Chưa có thông tin"
                    {% else %}
                        value="{{email}}"
                    {% endif %}
                >
            </div>
        </div>
        <div class="form-group row">
            <label for="major" class="col-sm-3 col-form-label">Khoa:</label>
            <div class="col-sm-9">
                <input type="text" class="form-control" id="major" name="major"
                    {% if major == None or major == '' %}
                        placeholder="Chưa có thông tin"
                    {% else %}
                        value="{{major}}" readonly
                    {% endif %}
                >
            </div>
        </div>
        <div class="form-group row">
            <label for="course" class="col-sm-3 col-form-label">Khóa:</label>
            <div class="col-sm-3">
                <input type="text" class="form-control" id="course" name="generation"
                {% if generation == None or generation == '' %}
                    placeholder="Chưa có thông tin"
                {% else %}
                    value="{{generation}}" readonly
                {% endif %}
                >
            </div>
            <label for="class" class="col-sm-2 col-form-label">Lớp:</label>
            <div class="col-sm-4">
                <input type="text" class="form-control" id="class" name="group"
                    {% if group == None or group == '' %}
                        placeholder="Chưa có thông tin"
                    {% else %}
                        value="{{group}}" readonly
                    {% endif %}
                >
            </div>
        </div>
        <div class="d-flex flex-row justify-content-center py-3">
            <button type="submit" class="btn activebutton">Cập nhật</button>
        </div>
    </form>
</div>
<script>
    function setValueBirthday() {
        document.getElementsByTagName("dateofbirth").value = getValueBirthday();
    }
    function getValueBirthday() {
        let birthday = '{{birthday}}';
        birthday = formatDate(birthday);
        return birthday;
    }
    function formatDate(date) {
        date = date.replace(/[.,]/g, '');
        date = date.split(" ");
        let monthsList = [
            "Jan",
            "Feb",
            "Mar",
            "Apr",
            "May",
            "Jun",
            "Jul",
            "Aug",
            "Sep",
            "Oct",
            "Nov",
            "Dec"
        ];
        let year = date[2];
        let month = `0${(monthsList.indexOf(date[0]) + 1)}`.slice(-2);
        let day = `0${(date[1])}`.slice(-2);
        return `${year}-${month}-${day}`;
    }
</script>
{% endblock %}